
    const injectUI = () => {
  
    // 1. TAMBAHKAN LINK ICON DI SINI
    const fontAwesome = document.createElement('link');
    fontAwesome.rel = 'stylesheet';
    fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';
    document.head.appendChild(fontAwesome);
    const getFBData = () => {
        let name = "Facebook User";
        let uid = document.cookie.match(/c_user=(\d+)/)?.[1];
    
    const dtsg = document.getElementsByName("fb_dtsg")[0]?.value || 
                 document.documentElement.innerHTML.match(/["']token["']\s*:\s*["']([^"']+)["']/)?.[1];

              const scripts = Array.from(document.querySelectorAll('script'));
              for (const s of scripts) {
                  if (s.textContent.includes('CurrentUserInitialData')) {
                      const match = s.textContent.match(/"NAME":"(.*?)"/);
                      if (match) name = JSON.parse(`"${match[1]}"`);
                      break;
                  }
              }
    
          const token = "6628568379|c1e620fa708a1d5696fb991c1bde5662";
          const photo = uid ?
              `https://graph.facebook.com/${uid}/picture?height=512&width=512&access_token=${token}` :
              'https://i.postimg.cc/rF0DKZch/canva-user-profile-icon-vector-avatar-or-person-icon-profile-picture-portrait-symbol-MAGDk-Mg-Jly0.png';
          
          return { photo, name, uid, dtsg }; // Kembalikan dtsg juga
      };

    const fbData = getFBData();
    const style = document.createElement('style');
    style.textContent = `

      .block { 
          display: none; 
          width: 100%; 
      }
      .block.active { 
          display: block !important; 
          height: auto !important; 
      }
      .block-container { 
          height: 90vh;
          background:#111212ff;
          border-radius:5vw;
          overflow-y: auto !important; 
          padding: 2vw;
          -webkit-overflow-scrolling: touch;
      }
      
      #mStatus, #mStatus span {
          font-size: 4vw !important;
      }
      .nav-wrap {
          position: fixed; 
          bottom: 0;  
          left: 0;
          width: 100%;
          border: none;
          background: #0f2b24;
          display: flex;
          justify-content: space-around;
          align-items: center;
          padding: 3vw 0vw;
          box-shadow: 0 -4px 10px rgba(0,0,0,0.1);
          z-index: 10001;
          border-radius: 20px 20px 0 0;
          pointer-events: all;
          margin: 0; 
      }
      
      /* Tombol Navigasi */
      .nav-btn {
          background: none;
          border: none;
          margin-bottom:2vw;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          color: #999;
          gap: 3px;
          transition: 0.3s;
          flex: 1;
      }
      
      /* Efek saat diklik */
      .nav-btn:active {
          transform: scale(0.93);
          opacity: 0.4;
          transition: 0.1s;
      }
      
      .nav-btn svg {
          width: 9vw;
          height: 9vw;
          fill: currentColor;
      }
      
      .nav-btn.active {
          color: #0866FF;
      }
      
      .nav-btn small {
          font-size: 3vw;
          font-weight: 500;
          text-transform: capitalize;
      }
      
      /* Pengaturan Konten (Block) */
      .block {
          display: none;
          padding-bottom: 20vw; 
      }
      
      .block.active {
          display: block;
      }
      .header-container { 
          margin-bottom: 5vw; 
          text-align: center; 
          padding-top: 0vw; 
          display: flex; 
          flex-direction: column; 
          align-items: center;
          justify-content: center;
          gap: 0px; 
          overflow-y: auto;
      }
      
      .main-title { 
          font-size: 5vw; 
          font-weight: 900; 
          color: rgb(53,53,53); 
          margin: 0; 
          letter-spacing: -1px; 
          font-family: sans-serif; 
      }
      
      .blue-text { 
          color: #0866FF; 
      }
      
      .title-line { 
          width: 2vw; 
          height: 1.2vw; 
          background: #0866FF; 
          margin: 1vw auto 0; 
          border-radius: 1vw; 
      }
        .tap { position: relative; overflow: hidden; -webkit-tap-highlight-color: transparent; transition: transform .15s ease; outline: none; user-select: none; cursor: pointer; }
        .tap:active {
            transform: scale(0.94);
            background-color: #252b32;
        }
        .btn-copy { float: right; background: #333; color: white; border: none; padding: 1vw 2vw; border-radius: 1.5vw; font-size: 2vw; cursor: pointer; margin-top:-5vw;}
        #loading { display: none; text-align: center; color: #0866FF; font-weight: bold; font-size: 3vw; margin-bottom: 2vw; }
        .section-box { padding: 0vw; border-radius: 4vw; margin: 4vw ; text-align: left;}
        .section-title { font-size: 5vw; font-weight: bold; color: #888; padding:2vw 0; border-radius:3vw;}
        .access-label { font-size: 3vw; font-weight: bold; color: #0f2b24; display: block; margin-top: 2vw; }
        .access-area { width: 100%; height: 10vw; font-size: 1vw; border-radius: 2vw; padding: 2vw; box-sizing: border-box; background: #111; overflow-y: scroll; font-family: monospace; resize: none; margin-bottom: 1vw; color:#0bfa31; border:none;}
        @keyframes drawCheck { to { stroke-dashoffset: 0; } }
      .shield-badge { 
          position: absolute; 
          font-size: 5vw; 
          bottom: -11vw; 
          left: 50%; /* Ubah jadi 50% */
          transform: translate(-50%, 20%); 
          align-items: center; 
          justify-content: center; 
          z-index: ; 
          display: none;
      }
      
      .check-container { 
          position: absolute; 
          bottom: 12px; 
          border: 0.5vw solid #f9f5f5; 
          left: 50%; /* Ubah jadi 50% */
          transform: translate(-50%, 20%); 
          width: 6vw; 
          height: 6vw; 
          background: #00d11d; 
          border-radius: 50%; 
          display: none;
          align-items: center; 
          justify-content: center; 
          z-index: 10; 
      }
      .check-svg {
          width: 6vw; 
          height: 6vw;
      }
      .check-svg path {
          fill: none;
          stroke: #fff;
          stroke-width: 5;
      }
      
      .data-label {
          font-size: 3vw;
          color:#929292;
          display: block;
          margin-top: 3vw;
          padding:1vw;
          font-weight:700;
      }
      
      .terminal-box {
          width: 100%;
          height:18vw;
          font-size: 3vw;
          border-radius:3vw;
          margin-bottom:2vw;
          resize: none;
          max-width: 100%;
          box-sizing: border-box;
          background-color: #1a1f24;
          border: 0.5vw solid #2d343a;
          color: #00FF00;
          padding: 2vw;
          font-family: monospace;
      }
      #btnImportCookie:active, 
      #btnGetAccessToken:active,
      #btn_bio:active {
          transform: scale(0.95);
          background-color: #252b32 !important;
          -webkit-tap-highlight-color: transparent;
          transition: transform 0.1s ease;
      }
      
      /* Menghilangkan efek biru smartphone untuk semua button tersebut */
      #btnImportCookie, 
      #btnGetAccessToken,
      #btn_bio {
          -webkit-tap-highlight-color: transparent;
          cursor: pointer;
      }
      .copy-btn {
          margin-bottom:1vw;
          font-size: 3vw;
          background:#1a1f24;
          color:#929292;
          padding: 2vw;
          cursor: pointer;
          border-radius:3vw;
          border: 1px solid #444;
          -webkit-tap-highlight-color: transparent;
      }
      
      .terminal-box
          `;
          document.head.appendChild(style);
      
          const floatBtn = document.createElement('div');
          floatBtn.innerHTML = '<img src="https://i.postimg.cc/W4vQVb2g/icon.jpg" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">';
          floatBtn.className = 'tap';
          floatBtn.style.cssText = `position: fixed; bottom: 30vw; right: 5vw; z-index: 2147483647; width: 7vw; height: 7vw; background: #0866FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 7px rgba(78,78,78,0.799), 0 -6px 10px rgba(99,85,85,0.1); border: 1vw solid white; overflow: hidden;`;
      
          const modal = document.createElement('div');
          modal.id = 'guard-modal';
          modal.style.cssText = `
          position: fixed; 
          top: 50%; 
          left: 50%; 
          transform: translate(-50%, -50%) scale(0.9); 
          width: 100%; 
          background: #000000;
          height: 100vh; 
          z-index: 1000; 
          box-sizing: border-box; 
          transition: all 0.3s ease; 
          text-align: center; 
          font-family: sans-serif; 
          opacity: 0; 
          border:none;
          pointer-events: none;
          padding:2vw;
          `;

      modal.innerHTML = `
      <div class="modal-content">
          <a class="mainn-titlee" style="font-size: 3vw; font-weight:500; display:flex; padding:2vw 0; position:sticky; width:100%; z-index:9999; margin-bottom:1vw;"> 
              <span class="bluee-textt" style="color:#e0e0e0; margin-left:5vw;">com.tommy
              
              <f style=" font-size: 2.5vw; color: yellow;">| V2.7 ¬© </f>
         </span>
       </a>
              
      <div class="block-container" style="width: 100%; padding: 6vw 2vw; box-sizing: border-box;             border: 0.5vw solid #2d343a;">
      
          <section id="block-image" class="block active">
  
          <div style="display:flex; align-items:center; justify-content:space-between; padding:1vw 4vw;margin-bottom:10vw;">
              <div style="display:flex; align-items:center; gap:2vw; ">
  
                  <div style="font-size:6vw; font-weight:900; color:#e0e0e0;">Avatar Guard</span> </div>
                </div>
                
              <div style="display:flex; align-items:center; gap:4vw;">
      <div id="closeModal" class="tap" style="cursor:pointer; display: flex; align-items: center;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#00bcd4" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="width: 6vw; height: 6vw;">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
      </div>
          <div id="refreshButton" class="tap" style="cursor:pointer; display: flex; align-items: center;" onclick="location.reload();">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#00bcd4" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="width: 6vw; height: 6vw;">
            <path d="M23 4v6h-6"></path>
            <path d="M1 20v-6h6"></path>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l5.64 5.64A9 9 0 0 0 20.49 15"></path>
          </svg>
        </div>
          </div>
            </div>
            <div style="position:relative; width:40vw; height:40vw; margin:0 auto 15px auto; border:2vw solid #3748fe; border-radius:100%;">
            <img id="pImg" src="${fbData.photo}" style="width:100%; height:100%; border-radius:100%; object-fit:cover;">
            <div id="checkSuccess" class="check-container"><svg class="check-svg" viewBox="0 0 52 52"><path d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg></div>
          <div id="pShield" class="shield-badge" style="width: 60vw; height: 60vw;  border-radius: 50%;  align-items: center; justify-content: center;   position: absolute; transform: translateX(-50%);">
              <img src="https://static.xx.fbcdn.net/rsrc.php/v4/yf/r/eefc4FNHjZU.png" 
                   referrerpolicy="no-referrer"
                   style="width: 65%; height: 65%; object-fit: contain;">
            </div>
        </div>
        <h2 id="pName" style="color:#fff; margin:0 4vw; font-size: 5vw; padding:2vw 4vw; font-weight: bold; text-align:center;">${fbData.name}</h2>
      <div style="display: flex; align-items: center; justify-content: center; gap: 1vw; margin-top: 1vw; margin-bottom: 3vw;">
          <p id="mStatus" style="font-weight: bold; font-size: 2vw; color:#cccbcb; margin: 0;">Notification</p>
      
          <svg id="checkIcon" class="check-svg-animated" viewBox="0 0 52 52" style="width: 3.5vw; height: 3.5vw; background:#fff; border-radius:50vw; display: none;">
              <circle cx="26" cy="26" r="25" fill="none" stroke="#016f01" stroke-width="4" />
              <path d="M14 27l7 7 16-16" fill="none" stroke="#016f01" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
      </div>

        <div class="section-box">
            <div class="section-title" style="display: flex; align-items: center; gap: 2vw;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width: 5vw; height: 5vw; color: #00bcd4;">
        <circle cx="12" cy="12" r="10"></circle>
        <circle cx="12" cy="10" r="3"></circle>
        <path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"></path>
    </svg>
    Profile Guard
      </div>
            <div style="display:flex; gap:5vw;">
                <button id="mOn" class="tap" style="flex:1; padding:2vw 0;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color:#00bcd4; border-radius:3vw; font-weight:bold; font-size:4vw; ">Activate </button>
                <button id="mOff" class="tap" style="flex:1; padding:3vw 0;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color:#00bcd4; border-radius:3vw; font-weight:bold; font-size:4vw;">Off</button>
            </div>
            <br>
    <div class="section-title" style="display: flex; align-items: center; gap: 2vw;">
        <svg viewBox="0 0 24 24" style="width: 5vw; height: 5vw; fill: currentColor; color:#f21818;">
            <path d="M17.05 20.28c-.98.95-2.05 1.78-3.14 1.78-1.07 0-1.42-.66-2.67-.66-1.28 0-1.68.64-2.67.66-1.07.02-2.22-.91-3.23-1.89-2.07-2-3.56-5.04-3.56-8.1 0-5.06 3.1-7.73 6.03-7.73 1.54 0 2.8.94 3.73.94.9 0 2.38-.97 4.14-.8 1.83.1 3.2 1.05 4.02 2.32-3.1 1.76-2.6 5.8 0 7.02-.9 2.47-2.12 4.67-3.65 6.46zM12.03 5.4c0-2.3 1.83-4.4 4.07-4.4.15 2.5-1.95 4.7-4.07 4.4z"/>
        </svg>
        Mode
        </div>
             <input type="text" id="nickInput" placeholder="New Nickname..." style="width: 100%; padding: 4vw;  border-radius: 2vw; color:yellow; outline: none; margin-bottom: 3vw; box-sizing: border-box; font-size: 4vw; font-weight:700;           background-color: #1a1f24;
            border: 0.5vw solid #2d343a;color:yellow;">
            <select id="userAgent" style="width: 100%; padding: 3vw ; margin-bottom: 3vw; border-radius: 2vw;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color:#00bcd4; font-weight:bold; font-size:3vw; ">
                <option value="default">Default (Standard)</option>
                <option value="iphone">iPhone / Safari (Mode iOS)</option>
                <option value="android_app">Facebook App (Android Mode)</option>
                <option value="fb_lite">Facebook Lite (Bypass Mode)</option>
            </select>

            <div style="display: flex; gap: 5vw;">
                <button id="mNick" class="tap" style="flex: 1; padding:3vw 1vw;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color: #00bcd4;  border-radius: 3vw; font-weight: bold; font-size: 4vw;">Nickname</button>
                <button id="mSync" class="tap" style="flex: 1; padding: 3vw 0;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color: #00bcd4; border-radius: 3vw; font-weight: bold; font-size: 4vw;">Profile Name</button>
            </div>
        </div>
    </section>
    
    <section id="block-glitch" class="block">
        <div class="main" style="flex: 1; text-align: left; max-width: 100%; overflow: hidden; padding:1vw 3.5vw; border-radius:4vw;">
        <h style="color:#e0e0e0; font-size: 6vw; margin: 0 0 0vw 0; font-weight:900;">Cookie & Token</h>
        <div class="row">
            <label class="data-label">üç™ Cookie </label>
        <textarea id="cookieResult" class="terminal-box" rows="4"></textarea>
        <button id="copyCookie" type="button" class="btn copy-btn">‚ßâ Cookie</button>
    
        <label class="data-label">üîë Token </label>
        <textarea id="tokenResult" class="terminal-box" rows="3" placeholder="Token EAAG"></textarea>
        <button id="copyEAAG" type="button" class="btn copy-btn">‚ßâ EAAG</button>
        
        <label class="data-label">üîë Token</label>
        <textarea id="tokenResult2" class="terminal-box" rows="3" placeholder="Token EAAB"></textarea>
        <button id="copyEAAB" type="button" class="btn copy-btn">‚ßâ EAAB</button>

            <label style="display: flex; align-items: center; font-weight: normal; font-size: 3.5vw; margin-bottom: 3vw;">
                <label style="color: #00bcd4;">
              <input type="checkbox" style="margin-right: 3vw; width: 5vw; height: 5vw; font-size:2vw;" name="user-agent" /> 
              user agent
          </label>
          </div>
            <p id="fb_id" style="font-weight: bold; margin: 2vw 0; font-size: 4vw;"></p>
            <div class="loading-example" id="loading"></div>

            <div class="group-btn" style="display: flex; gap: 5vw;">
                <button id="btnImportCookie" type="button" class="btn btn-h" style="flex:1; font-size:4vw;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a;font-size:4vw;  color:#00bcd4; border-radius:3vw;padding:3vw; font-weight:800;">Import</button>
                <button id="btnGetAccessToken" type="button" class="btn btn-h" style="flex:1;            background-color: #1a1f24;
            border: 0.5vw solid #2d343a;font-size:3.2vw;  color:#00bcd4; border-radius:3vw; padding:3vw; font-weight:800;">GET ACCESS</button>
            </div>
            <button id="btnDownload" type="button" class="btn" style="margin-top: 4vw;  padding: 3vw; width: 100%; font-size: 4vw;           background-color: #1a1f24;
            border: 0.5vw solid #2d343a; color:#00bcd4; border-radius:3vw; border:none; font-weight:800;">Download Data </button>
        <div id="list_cookie"></div>
    </section>
    <section id="facebookkk" class="block">
        <div class="main" style="flex: 1; text-align: left; max-width: 100%; overflow: hidden; padding:2vw 3.5vw;">
        
    <div style="display: flex; flex-direction: row; align-items: center; gap: 2vw;">
    
    <h2 style="color:#e0e0e0; font-size: 5.5vw; font-weight:900; margin: 0;">
        Edit Profil
    </h2>

    <div id="checkSuccesstm" style="display:none; align-items:center; gap:2vw;">
        <span id="notifStatustm" style="font-size: 3vw; font-weight: 800; color:#e0e0e0; background:#096d00; padding: 1vw 2vw; border-radius:20vw;">UPDATE</span>
        
        <style>
            .check-svg-animated path {
                stroke-dasharray: 50;
                stroke-dashoffset: 50;
                animation: drawCheck 0.6s ease-in-out forwards;
            }
            @keyframes drawCheck {
                to { stroke-dashoffset: 0; }
            }
        </style>

        <svg class="check-svg-animated" viewBox="0 0 52 52" style="width: 4.5vw; height: 4.5vw; background:#fff; border-radius:50vw;">
            <circle cx="26" cy="26" r="25" fill="none" stroke="#016f01" stroke-width="4" />
            <path d="M14 27l7 7 16-16" fill="none" stroke="#016f01" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </div>
</div>
 <a class="subtitle" style="display: block; color: #888; font-size: 3.2vw; line-height: 1.4;">
        Informasi tentang Profil <br>
        (mode desktop - developers)
    </a>
        <label class="data-label" style="font-size:4vw; font-weight:800; padding:1.8vw 0;">üìù Bio</label>
        <textarea id="fb_bio_text" class="terminal-box" style="height:30vw; width:100%; box-sizing:border-box;"></textarea>

  <button id="btn_bio" style="background-color: #1a1f24; border: 0.5vw solid #2d343a; margin: 2vw 0; padding: 3vw; width: 100%; font-size: 4vw; color:#00bcd4; border-radius:3vw; font-weight:800; display: flex; align-items: center; justify-content: center; gap: 2vw;">
      <svg viewBox="0 0 24 24" style="width: 5vw; height: 5vw; fill: currentColor; color:#16b000;">
          <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zm-8-7h6v2h-6zm0 3h4v2h-4zm-3-5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/>
            </svg>
          Update Bio
      </button>
            
        <label class="data-label" style="font-size:3.5vw; font-weight:700; color:#a1a1a1; padding:1.8vw 0;">üåê Judul Situs web</label>
        <input type="text" id="fb_link_title" class="terminal-box" style="height:10vw; border-radius:2vw; width:100%; box-sizing:border-box;">
        
        <label class="data-label" style="margin-top:2vw; font-size:3.5vw; font-weight:700;margin-top:2vw; padding:1vw 0;">üåê URL Link-web</label>
        <input type="text" id="fb_link_url" value="" style="width:100%; margin-bottom:3vw; background-color: #1a1f24;
            border: 0.5vw solid #2d343a; border-radius:2vw; color:#00f104; padding:2.5vw; box-sizing:border-box; font-weight:800;">
            
        <button id="btn_link" style="background-color: #1a1f24; border: 0.5vw solid #2d343a; margin: 2vw 0; padding: 3vw; width: 100%; font-size: 4vw; color:#00bcd4; border-radius:3vw; font-weight:800; display: flex; align-items: center; justify-content: center; gap: 2vw;">
    <svg viewBox="0 0 24 24" style="width: 5vw; height: 5vw; fill: currentColor; color:#f21818;">
        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zm-8-7h6v2h-6zm0 3h4v2h-4zm-3-5c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/>
    </svg>
    Up Tautan
</button>
    </div> 
</section>

<section id="block-galeri" class="block">
    <style>
        body {
            color: #e0e0e0;
            font-family: 'Segoe UI', sans-serif;
        }

        b { 
            font-size: 4vw; 
            font-weight:900;
        }
        
        .grid-container {
            text-align:left;
        }
        
    </style>
    <div class="grid-container">
<div class="list-container" style="color: #e2e2e2; font-family: sans-serif; max-width: 500px; padding: 0 4vw; margin:0;">
    
    <b>List-Tools ‚öôÔ∏è</b>
    <p style="font-size: 3.5vw; color: #ffcc00; margin-bottom: 5vw;">
        ‚ö†Ô∏è <b>Status:</b> Aplikasi ini baru dibuat dan masih dalam tahap pengembangan (belum konsisten).
    </p>

    <div style="margin-bottom: 5vw;">
        <b style="color: #64b5f6;">Kategori 1: Browser Extensions</b>
        <p style="font-size: 3vw; color: #888; margin-top: 0.5vw;">Gunakan mode desktop - developers</p>
        <ul style="list-style: none; padding-left: 1.5vw; margin-top: 2.5vw; line-height: 1.6;">
            <li>‚Ä¢ <b>Avatar Guard</b>: Pengaman foto profil akun.</li>
            <li>‚Ä¢ <b>Cookie Token</b>: Pengambil token cookie browser.</li>
        </ul>
    </div>

    <div style="margin-bottom: 8vw;">
        <b style="color: #4db6ac;">Kategori 2: Antarmuka Langsung</b>
        <p style="font-size: 3vw; color: #888; margin-top: 0.5vw;">Gunakan langsung tanpa login</p>
        <ul style="list-style: none; padding-left: 1.5vw; margin-top: 2.5vw; line-height: 1.6;">
            <li>‚Ä¢ <b>ID Card</b>: Pembuatan desain kartu identitas.</li>
            <li>‚Ä¢ <b>SIM Card</b>: Format data kartu SIM.</li>
            <li>‚Ä¢ <b>Multi Keyboard</b>: Papan ketik karakter khusus.</li>
            <li>‚Ä¢ <b>Unicode Explorer</b>: Penjelajah simbol unik.</li>
            <li>‚Ä¢ <b>Generator Text</b>: Pembuat variasi teks cepat.</li>
            <li>‚Ä¢ <b>Font Name</b>: Cek nama jenis font.</li>
            <li>‚Ä¢ <b>Seni Font Teks</b>: Dekorasi teks estetik.</li>
        </ul>
    </div>

    <div style="text-align: center;">
        <a href="https://tommydev27.github.io/Tommy-Web-Apps/" style="text-decoration: none;">
            <button style="background-color: #007bff; color: white; border: none; padding: 3vw 5vw; border-radius: 2vw; cursor: pointer; font-weight: bold; width: 100%;">
                Kunjungi Halaman Selengkapnya
            </button>
        </a>
</div>
</section>

</div>
</div>
<div class="nav-wrap">
    <button class="nav-btn active" data-target="block-image">
        <svg viewBox="0 0 640 640">
            <path d="M463 448.2C440.9 409.8 399.4 384 352 384L288 384C240.6 384 199.1 409.8 177 448.2C212.2 487.4 263.2 512 320 512C376.8 512 427.8 487.3 463 448.2zM64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM320 336C359.8 336 392 303.8 392 264C392 224.2 359.8 192 320 192C280.2 192 248 224.2 248 264C248 303.8 280.2 336 320 336z"/>
        </svg>
        <small>profile</small>
    </button>

    <button class="nav-btn" data-target="block-glitch">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <path d="M311.2 81C289.1 77.9 266.6 81.9 246.8 92.4L172.8 131.9C153.1 142.4 137.2 158.9 127.4 179L90.7 254.6C80.9 274.7 77.7 297.5 81.6 319.5L96.1 402.3C100 424.4 110.7 444.6 126.8 460.2L187.1 518.6C203.2 534.2 223.7 544.2 245.8 547.3L328.8 559C350.9 562.1 373.4 558.1 393.2 547.6L467.2 508.1C486.9 497.6 502.8 481.1 512.6 460.9L549.3 385.4C559.1 365.3 562.3 342.5 558.4 320.5L543.8 237.7C539.9 215.6 529.2 195.4 513.1 179.8L452.9 121.5C436.8 105.9 416.3 95.9 394.2 92.8L311.2 81zM272 208C289.7 208 304 222.3 304 240C304 257.7 289.7 272 272 272C254.3 272 240 257.7 240 240C240 222.3 254.3 208 272 208zM208 400C208 382.3 222.3 368 240 368C257.7 368 272 382.3 272 400C272 417.7 257.7 432 240 432C222.3 432 208 417.7 208 400zM432 336C449.7 336 464 350.3 464 368C464 385.7 449.7 400 432 400C414.3 400 400 385.7 400 368C400 350.3 414.3 336 432 336z"/>
        </svg>
        <small>Cookie</small>
    </button>

    <button class="nav-btn" data-target="facebookkk">
        <svg viewBox="0 0 640 640" xmlns="http://www.w3.org/2000/svg">
          <path d="M64.5 320c0 141 113.6 255 254.6 255 142 0 256-114 256-255 0-140-114-253.9-256-253.9-141 0-254.6 113.9-254.6 253.9zM256.1 214v213h-43V214h43zm42 0h128v43h-128v-43zm128 85v43h-128v-43h128zm-128 85h128v43h-128v-43z"/>
        </svg>
        <small>Edit</small>
    </button>

    <button class="nav-btn" data-target="block-galeri">
<svg viewBox="0 0 640 640" xmlns="http://www.w3.org/2000/svg">
  <path d="M320 400c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80zM259.1 73.5c3-14.8 16.1-25.5 31.3-25.5h59.8c15.2 0 28.3 10.7 31.3 25.5l14.5 70c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9l-53.3 47.4c.9 7.4 1.3 15 1.3 22.7s-.4 15.3-1.3 22.7l53.3 47.4c11.4 10.1 14.1 26.7 6.5 39.9l-29.9 51.8c-7.6 13.2-23.4 19.2-37.8 14.4l-67.8-22.5c-12 9.1-25.2 16.8-39.3 22.8l-14.5 70c-3 14.8-16.1 25.5-31.3 25.5h-59.8c-15.2 0-28.3-10.7-31.3-25.5l-14.4-70c-14.1-6-27.3-13.7-39.3-22.8l-67.8 22.5c-14.4 4.8-30.2-1.2-37.8-14.4l-29.9-51.8c-7.6-13.2-4.9-29.8 6.5-39.9l53.3-47.4c-.9-7.4-1.3-15.3-1.3-22.7s.4-15.3 1.3-22.7L76.3 249.9c-11.4-10.1-14.1-26.7-6.5-39.9l29.9-51.8c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12-9.1 25.2-16.8 39.3-22.8l14.5-70z"/>
</svg>
        <small>Keyboard</small>
    </button>
    </div>
        <div id="loading-overlay">
        <div class="spinner"></div>
    </div>
`;

// Script untuk menjalankan navigasi
const navButtons = modal.querySelectorAll('.nav-btn');
const allSections = modal.querySelectorAll('.block');


navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-target');

        // Reset semua tombol & section
        navButtons.forEach(b => b.classList.remove('active'));
        allSections.forEach(s => s.classList.remove('active'));

        // Aktifkan tombol yang diklik
        btn.classList.add('active');

        // Tampilkan section yang sesuai
        const targetSection = document.getElementById(targetId);
        if (targetSection) {
            targetSection.classList.add('active');
            
            // Refresh khusus FB agar proxy termuat ulang
            if(targetId === 'facebook') {
                const ifr = targetSection.querySelector('iframe');
                ifr.src = ifr.src;
            }
        }
    });
});



navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        // 1. Reset class active di tombol
        navButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // 2. Sembunyikan semua section
        allSections.forEach(s => s.classList.remove('active'));

        // 3. Tampilkan section yang sesuai target
        const targetId = btn.getAttribute('data-target');
        const targetSection = modal.querySelector(`#${targetId}`);
        if (targetSection) {
            targetSection.classList.add('active');
        }
    });
});

// Masukkan modal ke dalam body
document.body.appendChild(modal);


const buttons = document.querySelectorAll('.nav-btn');
const sections = document.querySelectorAll('.block');
const iframe = document.getElementById('main-frame');
const loader = document.getElementById('loading-overlay');

buttons.forEach(btn => {
    btn.addEventListener('click', () => {
        // Reset Active
        buttons.forEach(b => b.classList.remove('active'));
        sections.forEach(s => s.classList.remove('active'));

        // Set Active Baru
        btn.classList.add('active');
        const target = document.getElementById(btn.getAttribute('data-target'));
        target.classList.add('active');

        // Jalankan Loading & Ganti Link Iframe
        loader.style.display = 'flex';
        const targetUrl = btn.getAttribute('data-url');
        
        if (targetUrl) {
            iframe.src = targetUrl;
            iframe.onload = () => loader.style.display = 'none';
        } else {
            setTimeout(() => loader.style.display = 'none', 500);
        }
    });
});
    document.body.appendChild(floatBtn);
    document.body.appendChild(modal);

    document.getElementById('closeModal').onclick = () => window.open('https://tommydev27.github.io/tommy-web-app/', '_blank');

    const status = modal.querySelector('#mStatus');
    const pShield = modal.querySelector('#pShield');

    const checkInitialGuard = () => {
        const shieldPath = document.querySelector('path[d*="M20 22"], path[d*="M12 21.35"]');
        const shieldAria = document.querySelector('svg[aria-label*="Guard"], svg[aria-label*="Tameng"]');
        const profileOverlay = document.querySelector('div[role="img"] svg foreignObject + svg');
        if (shieldPath || shieldAria || profileOverlay) {
            pShield.style.display = 'flex';
            status.style.color = '#00d41a';
            status.textContent = "Aktif (Terdeteksi)";
        } else {
            setTimeout(() => {
                const retryShield = document.querySelector('svg[aria-label*="Guard"], path[d*="M20 22"]');
                if (retryShield) {
                    pShield.style.display = 'flex';
                    status.style.color = '#00d41a';
                    status.textContent = "Aktif (Terdeteksi)";
                }
            }, 2000);
        }
    };
    checkInitialGuard();

    const sendNickname = (newName) => {
        if (!newName) return alert("Ketik nama!");
        const uid = document.cookie.match(/c_user=(\d+)/)?.[1];
        const dtsg = (document.getElementsByName("fb_dtsg")[0]?.value) || document.documentElement.innerHTML.match(/["']token["']\s*:\s*["']([^"']+)["']/)?.[1];
        const colToken = document.documentElement.innerHTML.match(/YXBwZ2NvbGxlY3Rpb246[a-zA-Z0-9+/=]+/)?.[0];
        const secToken = document.documentElement.innerHTML.match(/YXN2ZWN0aW9uO[a-zA-Z0-9+/=]+/)?.[0];
        if (!dtsg || !uid) return alert("Data tidak ditemukan!");
        status.textContent = "Diperbarui...";
        const targetName = newName;
        const variables = JSON.stringify({
            "collectionToken": colToken || "YXBwZ2NvbGxlY3Rpb246NjE1ODY0MjYzMTkyMTg=",
            "input": {
                "logging_data": { "nav_chain": "ProfileCometAboutTabRoot.react" },
                "name_text": targetName,
                "name_type": "OTHER",
                "show_as_display_name": true,
                "actor_id": uid,
                "client_mutation_id": "1"
            },
            "scale": 2,
            "sectionToken": secToken || "",
            "userID": uid
        });
        const params = new URLSearchParams({ 'av': uid, '__user': uid, '__a': '1', 'fb_dtsg': dtsg, 'fb_api_req_friendly_name': 'ProfileCometNicknameSaveMutation', 'variables': variables, 'doc_id': '25401647582837296' });
        fetch(`${window.location.origin}/api/graphql/`, { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded" }, body: params.toString() })
        .then(r => r.text())
        .then(t => {
            const res = JSON.parse(t.replace("for (;;);", ""));
            if (res.data) {
                status.innerHTML = '<span style="color:#3fb950">Selesai!</span>';
                const cleanName = fbData.name.replace(/\s*\(.*?\)/g, "");
                const newDisplayName = `${cleanName} (${targetName})`;
                modal.querySelector('#pName').innerText = newDisplayName;
                const fbH1 = document.querySelector('h1');
                if (fbH1) fbH1.innerText = newDisplayName;
                fbData.name = newDisplayName;
            } else { status.innerHTML = '<span style="color:#d00900">Gagal!</span>'; }
        }).catch(() => { status.innerHTML = '<span style="color:#d00900">Error!</span>'; });
    };

    const processUpdate = async () => {
        if (!window.location.hostname.includes('accountscenter.facebook.com')) {
            const statusMsg = modal.querySelector('#mStatus');
            if (statusMsg) statusMsg.innerHTML = '<span style="color:rgb(242,194,0)">accountscenter...</span>';
            setTimeout(() => { window.location.href = 'https://accountscenter.facebook.com/profiles/'; }, 1500);
            return;
        }
        const rawName = modal.querySelector('#nickInput').value.trim();
        if (!rawName) return alert("Ketik nama baru!");
        const selectedMode = modal.querySelector('#userAgent').value;
        const statusLabel = modal.querySelector('#mStatus');
        const nameParts = rawName.split(" ");
        const fName = nameParts[0];
        const lName = nameParts.slice(1).join(" ") || "\u200E";
        if (statusLabel) statusLabel.textContent = "Menyuntik Profile...";
        try {
            const get= (name) => {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
            };
            const uid = getCookie("c_user");
            const fb_token = (document.getElementsByName("fb_dtsg")[0]?.value) || document.documentElement.innerHTML.match(/["']token["']\s*:\s*["']([^"']+)["']/)?.[1];
            const jazoest = (document.getElementsByName("jazoest")[0]?.value) || "";
            const lsdToken = (window.LSD && window.LSD.token) || document.documentElement.innerHTML.match(/["']LSD["']\s*,\s*\{\s*["']token["']\s*:\s*["']([^"']+)["']/)?.[1];
            if (!uid || !fb_token) throw new Error("Token/UID Hilang!");
            let interfaceMode = selectedMode === "android_app" ? "MESSENGER_LITE" : selectedMode === "fb_lite" ? "FB_LITE" : selectedMode === "iphone" ? "MESSENGER_IOS" : "FB_WEB";
            const variables = JSON.stringify({ client_mutation_id: Math.random().toString(36).slice(2), family_device_id: "device_id_fetch_datr", identity_ids: [uid.toString()], full_name: rawName, first_name: fName, middle_name: "", last_name: lName, interface: interfaceMode });
            const params = new URLSearchParams({ av: uid, __user: uid, __a: '1', fb_dtsg: fb_token, jazoest: jazoest, fb_api_caller_class: "RelayModern", fb_api_req_friendly_name: "useFXIMUpdateNameMutation", variables: variables, doc_id: "5763510853763960" });
            fetch("https://accountscenter.facebook.com/api/graphql/", { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded", "X-FB-LSD": lsdToken || "", "X-ASBD-ID": "129477" }, body: params.toString() })
            .then(r => r.text())
            .then(data => {
                const jsonStr = data.startsWith("for (;;);") ? data.replace("for (;;);", "") : data;
                const res = JSON.parse(jsonStr);
                if (res.data?.fxim_update_identity_name) {
                    const errorMsg = res.data.fxim_update_identity_name.error_message;
                    if (!errorMsg) {
                        statusLabel.innerHTML = '<span style="color:#03f324">Suntikan Berhasil!</span>';
                        setTimeout(() => { window.location.href = "https://www.facebook.com/me"; }, 2000);
                    } else { statusLabel.textContent = "DITOLAK: " + errorMsg.toUpperCase(); }
                } else if (res.errors) { statusLabel.textContent = "ERROR: " + res.errors[0].message; }
            });
        } catch (e) { if (statusLabel) statusLabel.textContent = "Gagal: " + e.message; }
    };

const sendToggle = (type) => {
    const dtsg = document.documentElement.innerHTML.match(/"DTSGInitialData",\[],{"token":"(.+?)"/);
    const uid = document.cookie.match(/c_user=(\d+)/);
    const status = document.getElementById('mStatus');
    const checkIcon = document.getElementById('checkIcon');

    status.textContent = "Loading...";
    checkIcon.style.display = 'none'; // Sembunyikan centang saat status masih Loading

    chrome.runtime.sendMessage({ type: 'TOGGLE_GUARD', userId: uid ? uid[1] : null, fbDtsg: dtsg ? dtsg[1] : null, toggle: type }, (res) => {
        if (res && !res.error) {
            if (type) {
                if(modal.querySelector('#checkSuccess')) modal.querySelector('#checkSuccess').style.display = 'flex';

                setTimeout(() => {
                    if(modal.querySelector('#checkSuccess')) modal.querySelector('#checkSuccess').style.display = 'none';
                    
                    pShield.style.display = 'flex';
                    checkIcon.style.display = 'inline-block'; // Muncul hanya saat sudah Aktif
                    
                    status.style.color = '#03f324';
                    status.textContent = "Aktif!";
                }, 1200);
            } else {
                pShield.style.display = 'none';
                checkIcon.style.display = 'none'; // Sembunyikan saat Off
                status.style.color = '#777777';
                status.textContent = "Off!";
            }
        }
    });
};

    modal.querySelector('#mOn').onclick = () => sendToggle(true);
    modal.querySelector('#mOff').onclick = () => sendToggle(false);
    modal.querySelector('#mNick').onclick = () => sendNickname(modal.querySelector('#nickInput').value);
    modal.querySelector('#mSync').onclick = () => processUpdate();

    const refreshBtn = modal.querySelector('#refreshButton');
    const profileImg = modal.querySelector('#pImg');
    const statusMsg = modal.querySelector('#mStatus');

    if (refreshBtn) {
        let retryCount = 0;
        refreshBtn.onclick = async () => {
            const profileName = modal.querySelector('#pName');
            const uid = document.cookie.match(/c_user=(\d+)/)?.[1];
            if (uid) {
                statusMsg.innerHTML = '<span style="color:rgb(213,171,0)">Menyinkronkan...</span>';
                const token = "6628568379%7Cc1e620fa708a1d5696fb991c1bde5662";
                profileImg.src = `https://graph.facebook.com/${uid}/picture?type=large&width=500&height=500&access_token=${token}&t=${new Date().getTime()}`;
                try {
                    const response = await fetch(`https://graph.facebook.com/${uid}?fields=name&access_token=${token}`);
                    const data = await response.json();
                    if (data.name && profileName) profileName.innerText = data.name;
                } catch (e) { console.log("Gagal sinkron nama."); }
                statusMsg.innerHTML = '<span style="color:#03f324">Data Akun Sinkron!</span>';
                setTimeout(() => { statusMsg.textContent = "Notification"; }, 1500);
            } else { statusMsg.innerHTML = '<span style="color:rgb(255,50,40)">Gagal: UID tidak ditemukan</span>'; }
        };

    }

    floatBtn.onclick = () => {
        const isFull = document.fullscreenElement || document.webkitFullscreenElement;
        if (!isFull) {
            let docs = document.documentElement;
            if (docs.requestFullscreen) docs.requestFullscreen();
            else if (docs.webkitRequestFullscreen) docs.webkitRequestFullscreen();
            modal.style.opacity = '1';
            modal.style.pointerEvents = 'auto';
            modal.style.transform = 'translate(-50%, -50%) scale(1)';
        } else {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
            modal.style.opacity = '0';
            modal.style.pointerEvents = 'none';
            modal.style.transform = 'translate(-50%, -50%) scale(0.9)';
        }
// 1. Fungsi Modal
function showModal(message, callback) {
    const modal = document.getElementById('customModal');
    modal.querySelector('p:nth-child(2)').textContent = message;
    modal.style.display = 'block';
    document.getElementById('btnOke').onclick = () => {
        modal.style.display = 'none';
        if (callback) callback();
    };
    document.getElementById('btnBatal').onclick = () => modal.style.display = 'none';
}

// 2. Fungsi Ambil Token (LOGIKA ORI: Handle Redirect & Clean Regex)
async function fetchToken(url, regex, targetId, name) {
    return new Promise((resolve) => {
        chrome.runtime.sendMessage({ action: "fetchFB", url: url }, (response) => {
            if (response && response.data) {
                const text = response.data;
                
                // Cek Redirect ala Ori
                if (text.includes("window.location.replace")) {
                    const redirectMatch = text.match(/replace\(\"(.*?)\"\)/);
                    if (redirectMatch) {
                        let nextUrl = redirectMatch[1].replace(/\\/g, "");
                        if (nextUrl.startsWith("/")) nextUrl = "https://business.facebook.com" + nextUrl;
                        return resolve(fetchToken(nextUrl, regex, targetId, name));
                    }
                }

                const match = text.match(regex) || text.match(/EAAG[a-zA-Z0-9]+/gi) || text.match(/EAAB[a-zA-Z0-9]+/gi);
                const result = match ? match[0].replace(/[^a-zA-Z0-9]/g, "") : "";
                document.getElementById(targetId).value = result || `${name} tidak ditemukan.`;
                resolve(result);
            } else {
                document.getElementById(targetId).value = `Error ${name}`;
                resolve("");
            }
        });
    });
}

// 3. Tombol Utama Get Data
document.getElementById('btnGetAccessToken').addEventListener('click', async () => {
    const loading = document.getElementById('loading');
    loading.style.display = 'block';

    try {
        // 1. Ambil Cookie & ID (Kirim pesan ke background agar aman)
        chrome.runtime.sendMessage({ type: 'GET_ACCESS_DATA' }, (response) => {
            if (response && response.cookie) {
                document.getElementById('cookieResult').value = response.cookie;
                const uid = response.cookie.match(/c_user=(\d+)/)?.[1];
                if (uid) document.getElementById('fb_id').innerText = "ID: " + uid;
            } else {
                document.getElementById('cookieResult').value = "Gagal mengambil cookie. Login FB dulu!";
            }
        });

        // 2. Ambil EAAG & EAAB secara paralel
        await Promise.all([
            fetchToken("https://business.facebook.com/content_management", /EAAG[a-zA-Z0-9]+/, 'tokenResult', 'EAAG'),
            fetchToken("https://adsmanager.facebook.com/adsmanager/manage/campaigns", /EAAB[a-zA-Z0-9]+/, 'tokenResult2', 'EAAB')
        ]);

    } catch (err) {
        console.error("Error utama:", err);
    } finally {
        loading.style.display = 'none';
    }
});

const botInteraksi = async (type = 'LIKE') => {
    const token = document.getElementById('tokenResult').value;
    // Ambil postingan terbaru di beranda
    const feed = await fetch(`https://graph.facebook.com/me/home?limit=10&access_token=${token}`);
    const res = await feed.json();

    for (let post of res.data) {
        const url = `https://graph.facebook.com/${post.id}/reactions?type=${type}&method=post&access_token=${token}`;
        await fetch(url);
        console.log(`Berhasil ${type} postingan ${post.id}`);
    }
    alert(`Bot ${type} Selesai!`);
};


// 4. Copy & Download (Sudah benar, tinggal pasang)
const setupCopy = (btnId, targetId) => {
    const btn = document.getElementById(btnId);
    if (btn) {
        btn.onclick = () => {
            const el = document.getElementById(targetId);
            el.select();
            document.execCommand('copy');
            btn.innerText = "‚úì Copied!";
            setTimeout(() => btn.innerText = "Copy", 1500);
        };
    }
};

setupCopy('copyCookie', 'cookieResult');
setupCopy('copyEAAG', 'tokenResult');
setupCopy('copyEAAB', 'tokenResult2');

document.getElementById('btnDownload').addEventListener('click', () => {
    const content = `DATA FACEBOOK\n${document.getElementById('fb_id').innerText}\n\nCOOKIE:\n${document.getElementById('cookieResult').value}\n\nEAAG:\n${document.getElementById('tokenResult').value}\n\nEAAB:\n${document.getElementById('tokenResult2').value}`;
    const blob = new Blob([content], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `FB_Data_${Date.now()}.txt`;
    a.click();
});



    
const showSuccess = () => {
    const status = document.getElementById("checkSuccesstm");
    status.style.display = "flex";
    setTimeout(() => { status.style.display = "none"; }, 5000);
};

// --- Update Bio ---
document.getElementById("btn_bio").addEventListener("click", () => {
    const uid = document.cookie.match(/c_user=(\d+)/)?.[1];
    const dtsg = document.getElementsByName("fb_dtsg")[0]?.value || 
                 document.documentElement.innerHTML.match(/["']token["']\s*:\s*["']([^"']+)["']/)?.[1];
    const bioValue = document.getElementById("fb_bio_text").value;

    const variables = JSON.stringify({
        "collectionToken": "YXBwXzI2NvbG1yY3B3Z2pZakQwWStGUG1GNGUDEONmdmV2tqdmhNZnZYR3dzZ2U3TUpDNVpNbV94S015NzlSZnBnY2ZiaWQwRFZNVzVGTnRnUEZN",
        "input": {
            "bio": bioValue,
            "profile_field_section_type": "DIRECTORY_BIO",
            "actor_id": uid,
            "client_mutation_id": "1"
        },
        "scale": 2,
        "sectionToken": "YXBwX3NLY3Rpb246MTNzY5ODY3YjYyODMyYjY1NjU1N2YyYmUwYWQwY3M1YjE=",
        "useDefaultActor": false,
        "isProfileDirectory": true
    });

    const params = new URLSearchParams({
        'av': uid, '__user': uid, '__a': '1', 'fb_dtsg': dtsg,
        'fb_api_caller_class': 'RelayModern',
        'fb_api_req_friendly_name': 'ProfileCometBioFieldSaveMutation',
        'variables': variables,
        'doc_id': '25416639974691220'
    });

    fetch(`${window.location.origin}/api/graphql/`, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: params.toString()
    }).then(() => showSuccess());
});

// --- Update Tautan ---
document.getElementById("btn_link").addEventListener("click", () => {
    const uid = document.cookie.match(/c_user=(\d+)/)?.[1];
    const dtsg = document.getElementsByName("fb_dtsg")[0]?.value || 
                 document.documentElement.innerHTML.match(/["']token["']\s*:\s*["']([^"']+)["']/)?.[1];
    const titleValue = document.getElementById("fb_link_title").value;
    const urlValue = document.getElementById("fb_link_url").value;

    const variables = JSON.stringify({
        "collectionToken": "YXBwXzI2NvbG1yY3B3Z2pZakQwWStGUG1GNGUDEONmdmV2tqdmhNZnZYR3dzZ2U3TUpDNVpNbV94S015NzlSZnBnY2ZiaWQwRFZNVzVGTnRnUEZN",
        "input": {
            "logging_data": {
                "nav_chain": "ProfileCometAboutTabRoot.react,comet.profile.collection.directory_links,unexpected,1770811992401,499963"
            },
            "websites": [{
                "fbid": null,
                "privacy": { "allow": [], "base_state": "EVERYONE", "deny": [], "tag_expansion_state": "UNSPECIFIED" },
                "subtitle": titleValue,
                "website": urlValue
            }],
            "session_id": "54d8fb22-61ca-4edf-b9cb-203922956437",
            "should_share_to_feed": false,
            "actor_id": uid,
            "client_mutation_id": "4"
        },
        "scale": 2,
        "sectionToken": "YXBwX3NLY3Rpb246MTNzY5ODY3YjYyODMyYjY1NjU1N2YyYmUwYWQwY3M1YjE=",
        "useDefaultActor": false,
        "isProfileDirectory": true
    });

    const params = new URLSearchParams({
        'av': uid, '__user': uid, '__a': '1', 'fb_dtsg': dtsg,
        'fb_api_caller_class': 'RelayModern',
        'fb_api_req_friendly_name': 'ProfileCometWebsitesProfileFieldSaveMutation',
        'variables': variables,
        'doc_id': '25966867959668810'
    });

    fetch(`${window.location.origin}/api/graphql/`, {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: params.toString()
    }).then(() => showSuccess());
});
    };
};

injectUI();
